(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)s=r[d],a[s]&&p.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"14de":function(e,t,n){},"2d4f":function(e,t,n){"use strict";var i=n("9470"),a=n.n(i);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("dac5"),n("6e26"),n("9604"),n("df67");var i=n("6e6d"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("markdown-editor",{on:{"upload-image":e.uploadImage,"upload-markdown":e.updateMarkdown},model:{value:e.articleValue,callback:function(t){e.articleValue=t},expression:"articleValue"}})],1)},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"compare"===e.markdownView,expression:"markdownView==='compare'"}],staticClass:"markdown-input"},[n("textarea",{staticClass:"markdown_input",attrs:{placeholder:"请输入内容...",spellcheck:"false"},domProps:{value:e.nativeValue},on:{input:e.handleInput,keydown:e.hotKey}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.toolVisible,expression:"toolVisible"}],staticClass:"editor-tool"},[n("i",{staticClass:"iconfont icon-image",on:{click:function(t){e.uploadImageVisible=!0}}})])]),n("markdown",{attrs:{source:e.nativeValue,view:e.markdownView},on:{"update:view":function(t){e.markdownView=t}}}),n("upload-image",{attrs:{visible:e.uploadImageVisible},on:{"upload-image":e.uploadImage,"update:visible":function(t){e.uploadImageVisible=t}}})],1)},r=[],l=(n("f301"),n("df99"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"custom-class":"dialog_form",title:"图片上传","close-on-click-modal":!1,visible:e.nativeVisible},on:{close:e.afterClose,"update:visible":function(t){e.nativeVisible=t}}},[n("div",{staticClass:"dialog-content"},[n("el-upload",{attrs:{"show-file-list":!1,drag:"",action:"/api/admin/image/image","http-request":e.httpRequest}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.fileData,expression:"!fileData"}]},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.fileData,expression:"fileData"}]},[n("img",{staticStyle:{width:"100%"},attrs:{src:e.fileUrl,alt:""}})])])],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.nativeVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.uploadImage}},[e._v("确 定")])],1)])}),c=[],u={data:function(){return{fileData:"",fileUrl:"",nativeVisible:!1}},props:{visible:Boolean},methods:{uploadImage:function(){this.$emit("upload-image",this.fileData.file)},httpRequest:function(e){var t=this,n=new FileReader;this.fileData=e,n.readAsDataURL(e.file),n.onload=function(e){t.fileUrl=this.result}},afterClose:function(){this.$emit("update:visible",this.nativeVisible)}},watch:{visible:{handler:function(){this.nativeVisible=this.visible}}}},d=u,p=(n("7e74"),n("17cc")),h=Object(p["a"])(d,l,c,!1,null,null,null),f=h.exports,v={ctrlKey:[66,187,191,192,49,50,51,52,53,54,54,192],tabKey:[9],commandKey:[83,90]},m=[16,17,18,91];function g(e,t,n){var i=t.selectionStart,a=t.selectionEnd,o=e.substring(0,i),s=e.substring(i,a),r=e.substring(a,e.length);if(!0===n.shiftKey)switch(n.keyCode){case 54:e=o+"^"+s+"^"+r,i+=1,a+=1;break;case 192:e=o+"\n```\n"+s+"\n```\n"+r,i+=5,a+=5;break}else switch(n.keyCode){case 9:e=o+"  "+s+r,i+=2,a+=2;break;case 66:e=o+"**"+s+"**"+r,a+=4;break;case 187:e=o+"=="+s+"=="+r,a+=4;break;case 192:e=o+"`"+s+"`"+r,i+=1,a+=1;break;case 191:e=o+"// "+s+r,i+=3,a+=3;break;case 49:e=o+"# "+s+r,i+=2,a+=2;break;case 50:e=o+"## "+s+r,i+=3,a+=3;break;case 51:e=o+"### "+s+r,i+=4,a+=4;break;case 52:e=o+"#### "+s+r,i+=5,a+=5;break;case 53:e=o+"##### "+s+r,i+=6,a+=6;break;case 54:e=o+"###### "+s+r,i+=7,a+=7;break}return{content:e,selectionStart:i,selectionEnd:a}}var w=n("3c9a"),b=n("eefc"),k=function(){function e(t){Object(w["a"])(this,e),t?(this._index=0,this._queueList=[t]):(this._index=-1,this._queueList=[])}return Object(b["a"])(e,[{key:"undo",value:function(){return this._index>0&&this._index--,this._queueList[this._index]}},{key:"redo",value:function(){return this._index<this._queueList.length&&this._index++,this._queueList[this._index]}},{key:"into",value:function(e){return e=JSON.parse(JSON.stringify(e)),this._queueList.length===this._index+1?(this._queueList.push(e),void(this._queueList.length>100?this._queueList.shift():this._index++)):this._queueList.length>this._index+1?(this._queueList.splice(this._index+1,this._queueList.length),this._queueList.push(e),void this._index++):void 0}},{key:"index",get:function(){return this._index}},{key:"current",get:function(){return this._queueList[this._index]}}]),e}(),y=k,x=new y,V={data:function(){return{nativeValue:"",toolVisible:!0,fileData:"",uploadImageVisible:!1,cursorStart:0,cursorEnd:0,markdownView:"compare"}},props:{value:{}},mounted:function(){var e=this;document.querySelector(".markdown_input").addEventListener("blur",function(){e.cursorStart=this.selectionStart,e.cursorEnd=this.selectionEnd},!1)},methods:{handleInput:function(e){var t=document.querySelector(".markdown_input"),n=e.target.value;this.nativeValue=n,this.$nextTick(function(){x.into({content:n,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})}),this.$emit("input",this.nativeValue)},hotKey:function(e){var t=document.querySelector(".markdown_input");if(console.log(e),(!1!==e.ctrlKey||!1!==e.metaKey||v.tabKey.includes(e.keyCode))&&!m.includes(e.keyCode)){if(v.ctrlKey.includes(e.keyCode)&&!0===e.ctrlKey){e.preventDefault();var n=g(this.nativeValue,t,e);this.nativeValue=n.content,x.into(n)}else if(v.tabKey.includes(e.keyCode)){e.preventDefault();var i=g(this.nativeValue,t,e);this.nativeValue=i.content,x.into(i)}else v.commandKey.includes(e.keyCode)&&!0===e.metaKey&&(e.preventDefault(),!1===e.shiftKey&&90===e.keyCode&&x.undo(),!0===e.shiftKey&&90===e.keyCode&&x.redo(),!1===e.shiftKey&&83===e.keyCode&&this.uploadMarkdown());this.nativeValue=x.current.content,this.$emit("input",this.nativeValue),this.$nextTick(function(){t.selectionStart=x.current.selectionStart,t.selectionEnd=x.current.selectionEnd})}},uploadMarkdown:function(){var e=this,t=this,n=new Promise(function(n,i){t.$emit("upload-markdown",e.nativeValue,n,i)});n.then(function(e){})},uploadImage:function(e){var t=this,n=new Promise(function(n,i){t.$emit("upload-image",e,n,i)});n.then(function(e){t.uploadImageVisible=!1;var n="![";n+=e.imageName,n+="]("+e.imageUrl+")";var i=t.nativeValue.substring(0,t.cursorStart),a=t.nativeValue.substring(t.cursorEnd,t.nativeValue.length);t.nativeValue=i+"\n"+n+"\n"+a,t.$emit("input",t.nativeValue)})}},watch:{value:{handler:function(e){this.nativeValue!==e&&(this.nativeValue=e,x=new y({content:e,selectionStart:e.length,selectionEnd:e.length}))},immediate:!0}},components:{"upload-image":f},beforeDestroy:function(){x=null}},_=V,L=(n("2d4f"),Object(p["a"])(_,s,r,!1,null,null,null)),C=L.exports;i["default"].component("markdown-editor",C);var S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"markdown-output",class:"preview"===e.nativeView?"preview":""},[n("div",{staticClass:"markdown-container"},[n("vue-markdown",{staticClass:"markdown",attrs:{"task-lists":!1,toc:"preview"===e.nativeView,"toc-first-level":e.tocFirstLevel,"toc-last-level":e.tocLastLevel,"toc-anchor-link-space":!0,"toc-anchor-link-symbol":"",source:e.nativeValue,prerender:e.beforeRender,postrender:e.afterRender},on:{"toc-rendered":e.tocRender}}),n("div",{directives:[{name:"show",rawName:"v-show",value:"preview"===e.nativeView,expression:"nativeView==='preview'"}],staticClass:"aside"})],1),n("div",{staticClass:"markdown-tool"},[n("i",{staticClass:"iconfont",class:"preview"===e.nativeView?"icon-right-push":"icon-left-push",on:{click:e.toggleView}})])])},j=[],q=(n("34a3"),n("7bc1"),n("076d")),O=n.n(q),I=n("f9d3"),E=n.n(I),M=n("70f0"),T=n.n(M),D=n("414a"),H=n.n(D),K=n("7fdd"),$=n.n(K),R=n("4c5e"),N=n.n(R);n("c30c");function P(e){var t,n=e.split('<code class="language-javascript">');return t=n.map(function(e,t){if(e.indexOf("</code>")>0&&t>0){var n=e.split("</code>");n[0]=E.a.highlight("javascript",n[0]).value,n[0]=n[0].replace(/&amp;/g,"&"),e=n.join("</code>")}return e}),e=t.join('<code class="language-javascript">'),e}function F(e){var t,n=e.split('<code class="language-css">');return t=n.map(function(e,t){if(e.indexOf("</code>")>0&&t>0){var n=e.split("</code>");n[0]=E.a.highlight("css",n[0]).value,n[0]=n[0].replace(/&amp;/g,"&"),e=n.join("</code>")}return e}),e=t.join('<code class="language-css">'),e}function U(e){var t,n=e.split('<code class="language-html">');return t=n.map(function(e,t){if(e.indexOf("</code>")>0&&t>0){var n=e.split("</code>");n[0]=n[0].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),n[0]=E.a.highlight("xml",n[0]).value,e=n.join("</code>")}return e}),e=t.join('<code class="language-html">'),e}function z(e){var t,n=e.split('<code class="language-json">');return t=n.map(function(e,t){if(e.indexOf("</code>")>0&&t>0){var n=e.split("</code>");n[0]=n[0].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),n[0]=E.a.highlight("json",n[0]).value,e=n.join("</code>")}return e}),e=t.join('<code class="language-json">'),e}E.a.registerLanguage("javascript",T.a),E.a.registerLanguage("css",H.a),E.a.registerLanguage("xml",$.a),E.a.registerLanguage("json",N.a);var A={name:"markdown",data:function(){return{tocHtml:"",tocFirstLevel:0,tocLastLevel:6,toolVisible:!0,nativeView:"",beforeRender:function(e){var t,n=this,i=e.split("{{{");return t=i.map(function(e,t){if(e.indexOf("}}}")>0&&t>0){var i=e.split("}}}");i[0]=n.$store.state.httpPrefix+i[0],e=i.join(")")}return e}),e=t.join("("),e},afterRender:function(e){return e=P(e),e=F(e),e=U(e),e=z(e),e}}},props:{source:{},tocId:{type:String},tocClass:{type:String},view:{type:String}},computed:{nativeValue:function(){return this.source}},methods:{tocRender:function(e){var t,n=document.createElement("div");t=this.tocId?document.querySelector("#"+this.tocId):this.tocClass?document.querySelector("."+this.tocClass):document.querySelector(".markdown-container>.aside"),n.innerHTML=e,n.className="markdown-toc",t.appendChild(n)},toggleView:function(){"compare"===this.nativeView?this.nativeView="preview":"preview"===this.nativeView&&(this.nativeView="compare"),this.$emit("update:view",this.nativeView)}},components:{"vue-markdown":O.a},watch:{source:{handler:function(e){if(this.toc){this.tocHtml="";var t=[];e.replace(/###### /g,function(){return t.push(6)," "}).replace(/##### /g,function(){return t.push(5)," "}).replace(/#### /g,function(){return t.push(4)," "}).replace(/### /g,function(){return t.push(3)," "}).replace(/## /g,function(){return t.push(2)," "}).replace(/# /g,function(){return t.push(1)," "}),this.tocFirstLevel=t[t.length-1]-1,this.tocLastLevel=t[0]}},deep:!0},view:{handler:function(e){this.nativeView=e},immediate:!0}}},B=A,J=(n("e3cf"),Object(p["a"])(B,S,j,!1,null,null,null)),W=J.exports;i["default"].component("markdown",W);var Y={name:"app",components:{},data:function(){return{articleValue:'# h1 Heading\n## h2 Heading\n### h3 Heading\n#### h4 Heading\n##### h5 Heading\n###### h6 Heading\n\n---\n\n\nEnable typographer option to see result.\n\n(c) (C) (r) (R) (tm) (TM) (p) (P) +-\n\n**This is bold text**\n\n*This is italic text*\n\n~~Strikethrough~~\n\n## Blockquotes\n\n> Blockquotes can also be nested...\n>> ...by using additional greater-than signs right next to each other...\n> > > ...or with spaces between arrows.\n\n## Lists\n\nUnordered\n\n+ Create a list by starting a line with `+`, `-`, or `*`\n+ Sub-lists are made by indenting 2 spaces:\n  - Marker character change forces new list start:\n    * Ac tristique libero volutpat at\n    + Facilisis in pretium nisl aliquet\n    - Nulla volutpat aliquam velit\n+ Very easy!\n\nOrdered\n\n1. Lorem ipsum dolor sit amet\n2. Consectetur adipiscing elit\n3. Integer molestie lorem at massa\n\n\n1. You can use sequential numbers...\n1. ...or keep all the numbers as `1.`\n\nStart numbering with offset:\n\n57. foo\n1. bar\n\n\n## Code\n\nInline `code`\n\nIndented code\n\n    // Some comments\n    line 1 of code\n    line 2 of code\n    line 3 of code\n\n\nBlock code "fences"\n\n```\nSample text here...\n```\nSyntax highlighting\n\n``` javascript\nvar foo = function (bar) {\n  return bar++;\n};\n\nconsole.log(foo(5));\n```\n\n## Tables\n\n| Option | Description |\n| ------ | ----------- |\n| data   | path to data files to supply the data that will be passed into templates. |\n| engine | engine to be used for processing templates. Handlebars is the default. |\n| ext    | extension to be used for dest files. |\n\nRight aligned columns\n\n| Option | Description |\n| ------:| -----------:|\n| data   | path to data files to supply the data that will be passed into templates. |\n| engine | engine to be used for processing templates. Handlebars is the default. |\n| ext    | extension to be used for dest files. |\n\n## Links\n\n[vue-markdown](https://github.com/miaolz123/vue-markdown)\n\n[link with title](https://github.com/miaolz123/vue-markdown "VueMarkdown")\n\nAutoconverted link https://github.com/miaolz123/vue-markdown (enable linkify to see)\n\n\n## Images\n\n![Minion](dist/img/minion.png)\n\nLike links, Images also have a footnote style syntax\n\n![Alt text][id]\n\nWith a reference later in the document defining the URL location:\n\n[id]: dist/img/minion.png  "The Dojocat"\n\n\n### Emojies\n\n> Classic markup: :wink: :cry: :laughing: :yum:\n>\n> Shortcuts (emoticons): :-) :-( 8-) ;)\n\n\n### Subscript / Superscript\n\n- 19^th^\n- H~2~O\n\n\n### \\<ins>\n\n++Inserted text++\n\n\n### \\<mark>\n\n==Marked text==\n\n\n### Footnotes\n\nFootnote 1 link[^first].\n\nFootnote 2 link[^second].\n\nInline footnote^[Text of inline footnote] definition.\n\nDuplicated footnote reference[^second].\n\n[^first]: Footnote **can have markup**\n\n    and multiple paragraphs.\n\n[^second]: Footnote text.\n\n\n\n### Abbreviations\n\nThis is HTML abbreviation example.\n\nIt converts "HTML", but keep intact partial entries like "xxxHTMLyyy" and so on.\n\n*[HTML]: Hyper Text Markup Language'}},methods:{uploadImage:function(e,t,n){console.log(e),t({imageName:"测试",imageUrl:"https://www.test.com"}),n()},updateMarkdown:function(e,t,n){console.log(e),t(),n()}}},G=Y,Q=(n("5c0b"),Object(p["a"])(G,a,o,!1,null,null,null)),X=Q.exports,Z=n("56be"),ee=n.n(Z);i["default"].use(ee.a),i["default"].config.productionTip=!1,new i["default"]({render:function(e){return e(X)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("c25c"),a=n.n(i);a.a},"7e74":function(e,t,n){"use strict";var i=n("14de"),a=n.n(i);a.a},9470:function(e,t,n){},"9d7c":function(e,t,n){},c25c:function(e,t,n){},e3cf:function(e,t,n){"use strict";var i=n("9d7c"),a=n.n(i);a.a}});
//# sourceMappingURL=app.b4b1880c.js.map